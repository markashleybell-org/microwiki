@model microwiki.Web.Models.DocumentViewModel

@{
    ViewBag.Title = "Edit";
    Layout = "~/Views/Shared/MainLayout.cshtml";
}

@section controls {

    <div id="control-bar">
        <p>
            <span id="page-title">Add/Edit Page</span>
            <span id="page-controls">
                <a href="/@((Model.Location != "root") ? Model.Location : "")" class="add-link">Cancel Edit</a>
            </span>
        </p>
    </div>
}

@section content {

    <h1>Edit</h1>

    <div class="left-panel">

    @using(Html.BeginForm("Update", "Wiki", FormMethod.Post)) {
        
        <p>@Html.HiddenFor(x => x.ID)
        <input type="submit" value="Save Page" /></p>  
        
        if(Model.Location != "root")
        {
            
            <p>@Html.LabelFor(x => x.Location)
            root/@Html.TextBoxFor(x => x.Location)</p>
        }
        
        <div class="wmd-panel">
            <div id="wmd-button-bar"></div>
            @Html.TextAreaFor(x => x.Body, new { id = "wmd-input", @class = "wmd-input" })
        </div>
        
    }

    </div>
    <div class="right-panel">
        <div id="wmd-preview" class="wmd-panel wmd-preview"></div>
    </div>

    @using(Html.BeginForm("Delete", "Wiki", FormMethod.Post, new { id = "delete-form" }))
    {
        
        <p>@Html.HiddenFor(x => x.ID)
        <input type="submit" value="Delete Page" /></p>   
        
    }

}

@section footer {

}